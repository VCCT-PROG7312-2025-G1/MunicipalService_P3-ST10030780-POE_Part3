@model List<MunicipalService_P3.Models.Event>
@{
    ViewData["Title"] = "Local Events";
    Layout = "_Layout";
}

<div class="container mt-4">
    <h2 class="text-white">Local Events</h2>

    <form method="get" class="mb-3">
        <div class="row">
            <div class="col-md-4">
                <input type="text" name="keyword" placeholder="Search by keyword" class="form-control" />
            </div>
            <div class="col-md-4">
                <select name="category" class="form-control">
                    <option value="">All Categories</option>
                    @foreach (var cat in ViewBag.Categories as HashSet<string>)
                    {
                        <option value="@cat">@cat</option>
                    }
                </select>
            </div>
            <div class="col-md-4">
                <input type="date" name="date" class="form-control" />
            </div>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Filter</button>
    </form>

@foreach (var e in Model)
{
        <div class="card bg-dark text-white mb-3">
            <div class="card-body">
                <h5 class="card-title">@e.Title</h5>
                <p class="card-text">@e.Description</p>
                <p><strong>Category:</strong> @e.Category | <strong>Date:</strong> @e.EventDate.ToShortDateString() | <strong>Location:</strong> @e.Location</p>
            </div>
        </div>
}

@if (ViewBag.Recommendations != null)
{
        <h4 class="text-light mt-4">Recommended Events</h4>
    @foreach (var rec in ViewBag.Recommendations as List<MunicipalService_P3.Models.Event>)
    {
            <p class="text-info">@rec.Title — @rec.EventDate.ToShortDateString()</p>
    }
}
    }
